---
title: "p8105_hw2_jm5916"
author: "Juhi Mattekatt"
date: "2025-09-30"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

# Problem 1

```{r problem1_setup, message = FALSE}
#read data in 
pols_month <- read_csv(file = "./fivethirtyeight_datasets/pols-month.csv")
unemployment <- read_csv(file = "./fivethirtyeight_datasets/unemployment.csv")
snp <- read_csv(file = "./fivethirtyeight_datasets/snp.csv")

#check datasets
names(pols_month)
names(unemployment)
names(snp)
```
I've imported the three datasets in using relative paths. The files are in the fivethirtyeight_datasets folder within my subdirectory for this homework. I viewed the data (in console) and checked to see how the names were formatted.

```{r problem1_manage_datasets}
pols_month <- pols_month %>%  #tidy pols_month for merging 
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% #break up the variable mon
  mutate(
    year = as.integer(year), #make year, month, and day integer variables, use as.integer to prevent dropping of leading 0s
    month = as.integer(month), 
    day = as.integer(day),
    month = month.name[month], #replace month number with month name
    president = case_when( #use mutate and case when to create new variable president
      prez_dem == 1 & prez_gop == 0 ~ "dem", 
      prez_gop == 1 & prez_dem == 0 ~ "gop") ) %>% 
  select(-prez_dem, -prez_gop, -day) #remove columns

snp <- snp %>%  #tidy snp for merging 
  separate(date, into = c("month", "day", "year"), sep = "/") %>% #break up the variable date
  mutate ( #mutate to change values
    year = case_when( #case when to add start of year to values in year
      0 <= as.numeric(year) & as.numeric(year) <= 15 ~ paste0("20", year), 
      50 <= as.numeric(year) & as.numeric(year) <= 99 ~ paste0("19", year)),
    year = as.numeric(year), #make year, month, and day integer variables
    month = as.numeric(month), 
    day = as.numeric(day),
    month = month.name[month]) %>% #replace month number with month name  
  select(-day) %>% #remove columns 
  arrange(year, month) %>% 
  relocate(year, month)

unemployment_2 <- unemployment %>% 
  pivot_longer( #pivot from wide to long format
    Jan:Dec,
    names_to = "month", #make new variable month same as in other datasets
    values_to = "%_unemployment") %>% 
  rename(year = Year) #make sure year isn't capitalized
  
```

Third, tidy the unemployment data so that it can be merged with the previous datasets. This process will involve switching from “wide” to “long” format; ensuring that key variables have the same name; and ensuring that key variables take the same values.
