p8105_hw2_jm5916
================
Juhi Mattekatt
2025-09-30

# Problem 1

``` r
#read data in 
pols_month <- read_csv(file = "./fivethirtyeight_datasets/pols-month.csv")
unemployment <- read_csv(file = "./fivethirtyeight_datasets/unemployment.csv")
snp <- read_csv(file = "./fivethirtyeight_datasets/snp.csv")

#check datasets
names(pols_month)
```

    ## [1] "mon"      "prez_gop" "gov_gop"  "sen_gop"  "rep_gop"  "prez_dem" "gov_dem" 
    ## [8] "sen_dem"  "rep_dem"

``` r
names(unemployment)
```

    ##  [1] "Year" "Jan"  "Feb"  "Mar"  "Apr"  "May"  "Jun"  "Jul"  "Aug"  "Sep" 
    ## [11] "Oct"  "Nov"  "Dec"

``` r
names(snp)
```

    ## [1] "date"  "close"

I’ve imported the three datasets in using relative paths. The files are
in the fivethirtyeight_datasets folder within my subdirectory for this
homework. I viewed the data (in console) and checked to see how the
names were formatted.

``` r
#clean pols_month for merging
pols_month_merge <- pols_month %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% #break up the variable mon
  mutate(
    year = as.integer(year), #make year, month, and day integer variables, use as.integer to prevent dropping of leading 0s
    month = as.integer(month), 
    day = as.integer(day),
    month = month.name[month], #replace month number with month name
    president = case_when( #use mutate and case when to create new variable president
      prez_dem == 1 & prez_gop == 0 ~ "dem", 
      prez_gop == 1 & prez_dem == 0 ~ "gop") ) %>% 
  select(-prez_dem, -prez_gop, -day) %>%  #remove columns
  arrange(year, month) #arrange by year and month

#clean snp for merging 
snp_merge <- snp %>%  
  separate(date, into = c("month", "day", "year"), sep = "/") %>% #break up the variable date
  mutate( #mutate to change values
    year = case_when( #case when to add start of year to values in year
      0 <= as.numeric(year) & as.numeric(year) <= 15 ~ paste0("20", year), 
      50 <= as.numeric(year) & as.numeric(year) <= 99 ~ paste0("19", year)),
    year = as.numeric(year), #make year, month, and day integer variables
    month = as.numeric(month), 
    day = as.numeric(day),
    month = month.name[month]) %>% #replace month number with month name  
  select(-day) %>% #remove columns 
  arrange(year, month) %>% 
  relocate(year, month) #move year and month to front

#clean unemployment for merging
unemployment_merge <- unemployment %>%  
  pivot_longer( #pivot from wide to long format
    Jan:Dec,
    names_to = "month_abb", #make new variable month_abb for abbreviated months
    values_to = "%_unemployment") %>% 
  rename(year = Year) %>% #make sure year isn't capitalized
  mutate( #make new variable month with full month names to match other datasets
    month = month.name[match(month_abb, month.abb)]) %>% #convert abbreviated to full name
  arrange(year, month) %>% 
  relocate(year, month) %>% 
  select(-month_abb) #remove abbreviated month column
```

I’ve created 3 new datasets (I kept the old datasets as is in case I
made any mistakes while cleaning the data) to make the keys I’m joining
by compatible with each other.

``` r
#left join snp into pols_month
pols_snp = left_join(pols_month_merge, snp_merge, by = c("year", "month"))

#left join unemployment into snp_pols
pols_snp_unemployment = left_join(pols_snp, unemployment_merge, by = c("year", "month"))
```

### Explanation

The dataset `pols_month` contains information on the number of national
politicians (president, senators, governors, and representatives) who
are democratic or republican at some time point. `snp` indicates the
closing values of the S&P stock index at a given date, and
`unemployment` identifies % unemployment for every month of a given
year. My final dataset `pols_snp_unemployment` has 822 rows and 11
columns and combines all the information from the above datasets for the
years and months described in `pols_month`. Overall, there will be data
on political parties in power and economic indicators for a time period.
The years range from 1947 to 2015, and key variables include
`president`, `close`, and `%_unemployment`.

# Problem 2

``` r
library(readxl) #to import excel files, already had package installed 

#import Mr. Trash Wheel data, omit first row with figure and last row with sums
Mr_TW <- 
  read_excel("./202509 Trash Wheel Collection Data.xlsx", 
    sheet = "Mr. Trash Wheel", range = "A2:N709") %>% 
  #clean Mr_TW
  janitor::clean_names() %>% #make names snake case
  mutate(
    sports_balls = round(sports_balls, 0), #round sports_balls to nearest integer
    sports_balls = as.integer(sports_balls), #convert to an integer variable
    trash_wheel = "Mr") %>% #add new variable to keep track of which Trash Wheel is which
  relocate(trash_wheel)

#import Professor Trash Wheel data, omit first row with figure and last row with sums
Prof_TW <- 
  read_excel("./202509 Trash Wheel Collection Data.xlsx", 
      sheet = "Professor Trash Wheel", range = "A2:M134") %>% 
  #clean Prof_TW
  janitor::clean_names() %>% #make names snake case
  mutate(
    trash_wheel = "Prof") %>% #add new variable to keep track of which Trash Wheel is which
  relocate(trash_wheel)

#import Gwynns Falls Trash Wheel data, omit first row with figure and last row with sums
Gwy_TW <- 
  read_excel("./202509 Trash Wheel Collection Data.xlsx", 
      sheet = "Gwynns Falls Trash Wheel", range = "A2:L351") %>% 
  #clean Prof_TW
  janitor::clean_names() %>%   #make names snake case
  mutate(
    trash_wheel = "Gwynns") %>% #add new variable to keep track of which Trash Wheel is which
  relocate(trash_wheel)
```

I imported and prepared the 3 datasets to be combined.

``` r
#running the combining code the first time didn't work because "year" was numeric in one dataset and a character in another. I'll make year in every dataset a character.
Mr_TW <- Mr_TW %>% 
  mutate(year = as.character(year))
Prof_TW <- Prof_TW %>% 
  mutate(year = as.character(year))
Gwy_TW <- Gwy_TW %>% 
  mutate(year = as.character(year))

#combine the datasets          
TW_tidy <- bind_rows(Mr_TW, Prof_TW, Gwy_TW)
```

### Explanation

`TW_tidy` contains information on the types and amounts of trash
collected by 3 trash wheels (Mr. Trash Wheel, Professor Trash Wheel, and
the Gwynns Falls Trash Wheel/Gwynnda) from 2014-2025. There are 1188
observations. Some key variables include `date` (date dumpster was
collected), `weight_tons` (weight of each dumpster in tons),
`volume_cubic_yards` (volume of waste collected from each dumpster in
cubic yards), and `homes_powered` (number of homes powered by waste
collected). The total weight of trash collected by Professor Trash Wheel
was 282.26 tons. There was no missing data for `weight_tons`. The total
number of cigarette butts collected by Gwynnda in June of 2022 was0.

# Problem 3
